import t from"void-elements";const e=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function n(n){const s={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},r=n.match(/<\/?([^\s]+?)[/\s>]/);if(r&&(s.name=r[1],(t[r[1].toLowerCase()]||"/"===n.charAt(n.length-2))&&(s.voidElement=!0),s.name.startsWith("!--"))){const t=n.indexOf("--\x3e");return{type:"comment",comment:-1!==t?n.slice(4,t):""}}const c=new RegExp(e);let i=null;for(;i=c.exec(n),null!==i;)if(i[0].trim())if(i[1]){const t=i[1].trim();let e=[t,""];t.indexOf("=")>-1&&(e=t.split("=")),s.attrs[e[0]]=e[1],c.lastIndex--}else i[2]&&(s.attrs[i[2]]=i[3].trim().substring(1,i[3].length-1));return s}const s=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,r=/^\s*$/,c=Object.create(null);function i(t,e){switch(e.type){case"text":return t+e.content;case"tag":return t+="<"+e.name+(e.attrs?function(t){const e=[];for(let n in t)e.push(n+'="'+t[n]+'"');return e.length?" "+e.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?t:t+e.children.reduce(i,"")+"</"+e.name+">";case"comment":return t+"\x3c!--"+e.comment+"--\x3e"}}var o={parse:function(t,e){e||(e={}),e.components||(e.components=c);const i=[],o=[];let l,a=-1,m=!1;if(0!==t.indexOf("<")){var u=t.indexOf("<");i.push({type:"text",content:-1===u?t:t.substring(0,u)})}return t.replace(s,function(s,c){if(m){if(s!=="</"+l.name+">")return;m=!1}const u="/"!==s.charAt(1),f=s.startsWith("\x3c!--"),h=c+s.length,p=t.charAt(h);let d;if(f){const t=n(s);return a<0?(i.push(t),i):(d=o[a],d.children.push(t),i)}if(u&&(a++,l=n(s),"tag"===l.type&&e.components[l.name]&&(l.type="component",m=!0),l.voidElement||m||!p||"<"===p||l.children.push({type:"text",content:t.slice(h,t.indexOf("<",h))}),0===a&&i.push(l),d=o[a-1],d&&d.children.push(l),o[a]=l),(!u||l.voidElement)&&(a>-1&&(l.voidElement||l.name===s.slice(2,-1))&&(a--,l=-1===a?i:o[a]),!m&&"<"!==p&&p)){d=-1===a?i:o[a].children;const e=t.indexOf("<",h);let n=t.slice(h,-1===e?void 0:e);r.test(n)&&(n=" "),(e>-1&&a+d.length>=0||" "!==n)&&d.push({type:"text",content:n})}}),i},stringify:function(t){return t.reduce(function(t,e){return t+i("",e)},"")}};export default o;
//# sourceMappingURL=html-parse-stringify.modern.js.map
