{"version":3,"file":"whyDidYouRender.js","sources":["../src/wdyrStore.js","../src/consts.js","../src/calculateDeepEqualDiffs.js","../src/printDiff.js","../src/defaultNotifier.js","../src/normalizeOptions.js","../src/getDisplayName.js","../src/findObjectsDifferences.js","../src/getUpdateInfo.js","../src/utils.js","../src/shouldTrack.js","../src/patches/patchClassComponent.js","../src/patches/patchFunctionalOrStrComponent.js","../src/patches/patchMemoComponent.js","../src/patches/patchForwardRefComponent.js","../src/whyDidYouRender.js","../src/index.js"],"sourcesContent":["const wdyrStore = {\r\n  /* The React object we patch */\r\n  React: undefined,\r\n\r\n  /* Processed user options for WDYR */\r\n  options: undefined,\r\n\r\n  /* The original React.createElement function */\r\n  origCreateElement: undefined,\r\n\r\n  /* The original React.createFactory function */\r\n  origCreateFactory: undefined,\r\n\r\n  /* The original React.cloneElement function */\r\n  origCloneElement: undefined,\r\n\r\n  /* A weak map of all React elements to their WDYR patched react elements */\r\n  componentsMap: new WeakMap(),\r\n\r\n  /* A weak map of props to the owner element that passed them */\r\n  ownerDataMap: new WeakMap(),\r\n\r\n  /* An array of hooks tracked during one render */\r\n  hooksPerRender: [],\r\n};\r\n\r\nexport default wdyrStore;\r\n","export const diffTypes = {\r\n  'different': 'different',\r\n  'deepEquals': 'deepEquals',\r\n  'date': 'date',\r\n  'regex': 'regex',\r\n  'reactElement': 'reactElement',\r\n  'function': 'function',\r\n  'same': 'same',\r\n};\r\n\r\nexport const diffTypesDescriptions = {\r\n  [diffTypes.different]: 'different objects',\r\n  [diffTypes.deepEquals]: 'different objects that are equal by value',\r\n  [diffTypes.date]: 'different date objects with the same value',\r\n  [diffTypes.regex]: 'different regular expressions with the same value',\r\n  [diffTypes.reactElement]: 'different React elements (remember that the <jsx/> syntax always produces a *NEW* immutable React element so a component that receives <jsx/> as props always re-renders)',\r\n  [diffTypes.function]: 'different functions with the same name',\r\n  [diffTypes.same]: 'same objects by ref (===)',\r\n};\r\n\r\n// copied from packages/shared/ReactSymbols.js in https://github.com/facebook/react\r\nconst hasSymbol = typeof Symbol === 'function' && Symbol.for;\r\nexport const REACT_MEMO_TYPE = hasSymbol ? Symbol.for('react.memo') : 0xead3;\r\nexport const REACT_FORWARD_REF_TYPE = hasSymbol ? Symbol.for('react.forward_ref') : 0xead0;\r\n","import {\r\n  isArray,\r\n  isPlainObject,\r\n  isDate,\r\n  isRegExp,\r\n  isError,\r\n  isFunction,\r\n  isSet,\r\n  has,\r\n  uniq,\r\n} from 'lodash';\r\n\r\nimport { diffTypes } from './consts';\r\n\r\nconst hasElementType = typeof Element !== 'undefined';\r\n\r\n// copied from https://github.com/facebook/react/packages/shared/ReactSymbols.js\r\nconst hasSymbol = typeof Symbol === 'function' && Symbol.for;\r\nconst REACT_ELEMENT_TYPE = hasSymbol ? Symbol.for('react.element') : 0xeac7;\r\nconst isReactElement = object => object.$$typeof === REACT_ELEMENT_TYPE;\r\n// end\r\n\r\nfunction trackDiff(a, b, diffsAccumulator, pathString, diffType) {\r\n  diffsAccumulator.push({\r\n    diffType,\r\n    pathString,\r\n    prevValue: a,\r\n    nextValue: b,\r\n  });\r\n  return diffType !== diffTypes.different;\r\n}\r\n\r\nfunction isGetter(obj, prop) {\r\n  return !!Object.getOwnPropertyDescriptor(obj, prop)['get'];\r\n}\r\n\r\nexport const dependenciesMap = new WeakMap();\r\n\r\nfunction accumulateDeepEqualDiffs(a, b, diffsAccumulator, pathString = '', { detailed }) {\r\n  if (a === b) {\r\n    if (detailed) {\r\n      trackDiff(a, b, diffsAccumulator, pathString, diffTypes.same);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  if (!a || !b) {\r\n    return trackDiff(a, b, diffsAccumulator, pathString, diffTypes.different);\r\n  }\r\n\r\n  if (isArray(a) && isArray(b)) {\r\n    const arrayLength = a.length;\r\n    if (arrayLength !== b.length) {\r\n      return trackDiff([...a], [...b], diffsAccumulator, pathString, diffTypes.different);\r\n    }\r\n\r\n    const arrayItemDiffs = [];\r\n    let numberOfDeepEqualsItems = 0;\r\n    for (let i = arrayLength; i--; i > 0) {\r\n      const diffEquals = accumulateDeepEqualDiffs(a[i], b[i], arrayItemDiffs, `${pathString}[${i}]`, { detailed });\r\n      if (diffEquals) {\r\n        numberOfDeepEqualsItems++;\r\n      }\r\n    }\r\n\r\n    if (detailed || numberOfDeepEqualsItems !== arrayLength) {\r\n      diffsAccumulator.push(...arrayItemDiffs);\r\n    }\r\n\r\n    if (numberOfDeepEqualsItems === arrayLength) {\r\n      return trackDiff([...a], [...b], diffsAccumulator, pathString, diffTypes.deepEquals);\r\n    }\r\n\r\n    return trackDiff([...a], [...b], diffsAccumulator, pathString, diffTypes.different);\r\n  }\r\n\r\n  if (isSet(a) && isSet(b)) {\r\n    if (a.size !== b.size) {\r\n      return trackDiff(new Set(a), new Set(b), diffsAccumulator, pathString, diffTypes.different);\r\n    }\r\n\r\n    for (const valA of a) {\r\n      if (!b.has(valA)) {\r\n        return trackDiff(new Set(a), new Set(b), diffsAccumulator, pathString, diffTypes.different);\r\n      }\r\n    }\r\n\r\n    return trackDiff(new Set(a), new Set(b), diffsAccumulator, pathString, diffTypes.deepEquals);\r\n  }\r\n\r\n  if (isDate(a) && isDate(b)) {\r\n    return a.getTime() === b.getTime() ?\r\n      trackDiff(new Date(a), new Date(b), diffsAccumulator, pathString, diffTypes.date) :\r\n      trackDiff(new Date(a), new Date(b), diffsAccumulator, pathString, diffTypes.different);\r\n  }\r\n\r\n  if (isRegExp(a) && isRegExp(b)) {\r\n    return a.toString() === b.toString() ?\r\n      trackDiff(a, b, diffsAccumulator, pathString, diffTypes.regex) :\r\n      trackDiff(a, b, diffsAccumulator, pathString, diffTypes.different);\r\n  }\r\n\r\n  if (hasElementType && a instanceof Element && b instanceof Element) {\r\n    return trackDiff(a, b, diffsAccumulator, pathString, diffTypes.different);\r\n  }\r\n\r\n  if (isReactElement(a) && isReactElement(b)) {\r\n    if (a.type !== b.type) {\r\n      return trackDiff(a, b, diffsAccumulator, pathString, diffTypes.different);\r\n    }\r\n\r\n    const reactElementPropsAreDeepEqual =\r\n      accumulateDeepEqualDiffs(a.props, b.props, [], `${pathString}.props`, { detailed });\r\n\r\n    return reactElementPropsAreDeepEqual ?\r\n      trackDiff(a, b, diffsAccumulator, pathString, diffTypes.reactElement) :\r\n      trackDiff(a, b, diffsAccumulator, pathString, diffTypes.different);\r\n  }\r\n\r\n  if (isFunction(a) && isFunction(b)) {\r\n    if (a.name !== b.name) {\r\n      return trackDiff(a, b, diffsAccumulator, pathString, diffTypes.different);\r\n    }\r\n\r\n    const aDependenciesObj = dependenciesMap.get(a);\r\n    const bDependenciesObj = dependenciesMap.get(b);\r\n\r\n    if (aDependenciesObj && bDependenciesObj) {\r\n      const dependenciesAreDeepEqual =\r\n        accumulateDeepEqualDiffs(aDependenciesObj.deps, bDependenciesObj.deps, diffsAccumulator, `${pathString}:parent-hook-${aDependenciesObj.hookName}-deps`, { detailed });\r\n\r\n      return dependenciesAreDeepEqual ?\r\n        trackDiff(a, b, diffsAccumulator, pathString, diffTypes.function) :\r\n        trackDiff(a, b, diffsAccumulator, pathString, diffTypes.different);\r\n    }\r\n\r\n    return trackDiff(a, b, diffsAccumulator, pathString, diffTypes.function);\r\n  }\r\n\r\n  if (typeof a === 'object' && typeof b === 'object' && Object.getPrototypeOf(a) === Object.getPrototypeOf(b)) {\r\n    const aKeys = Object.getOwnPropertyNames(a);\r\n    const bKeys = Object.getOwnPropertyNames(b);\r\n    \r\n    const allKeys = uniq([...aKeys, ...bKeys]);\r\n\r\n    const clonedA = isPlainObject(a) ? { ...a } : a;\r\n    const clonedB = isPlainObject(b) ? { ...b } : b;\r\n\r\n    if (allKeys.length !== aKeys.length || allKeys.length !== bKeys.length) {\r\n      return trackDiff(clonedA, clonedB, diffsAccumulator, pathString, diffTypes.different);\r\n    }\r\n\r\n    const relevantKeys = allKeys.filter(key => {\r\n      // do not compare the stack as it differ even though the errors are identical.\r\n      if (key === 'stack' && isError(a)) {\r\n        return false;\r\n      }\r\n\r\n      // getters checking is causing too much problems because of how it's used in js.\r\n      // not only getters can throw errors, they also cause side effects in many cases.\r\n      if (isGetter(a, key)) {\r\n        return false;\r\n      }\r\n\r\n      return true;\r\n    });\r\n\r\n    const keysLength = relevantKeys.length;\r\n\r\n    for (let i = keysLength; i--; i > 0) {\r\n      if (!has(b, relevantKeys[i])) {\r\n        return trackDiff(clonedA, clonedB, diffsAccumulator, pathString, diffTypes.different);\r\n      }\r\n    }\r\n\r\n    const objectValuesDiffs = [];\r\n    let numberOfDeepEqualsObjectValues = 0;\r\n    for (let i = keysLength; i--; i > 0) {\r\n      const key = relevantKeys[i];\r\n      const deepEquals = accumulateDeepEqualDiffs(a[key], b[key], objectValuesDiffs, `${pathString}.${key}`, { detailed });\r\n      if (deepEquals) {\r\n        numberOfDeepEqualsObjectValues++;\r\n      }\r\n    }\r\n\r\n    if (detailed || numberOfDeepEqualsObjectValues !== keysLength) {\r\n      diffsAccumulator.push(...objectValuesDiffs);\r\n    }\r\n\r\n    if (numberOfDeepEqualsObjectValues === keysLength) {\r\n      return trackDiff(clonedA, clonedB, diffsAccumulator, pathString, diffTypes.deepEquals);\r\n    }\r\n\r\n    return trackDiff(clonedA, clonedB, diffsAccumulator, pathString, diffTypes.different);\r\n  }\r\n\r\n  return trackDiff(a, b, diffsAccumulator, pathString, diffTypes.different);\r\n}\r\n\r\nexport default function calculateDeepEqualDiffs(a, b, initialPathString, { detailed = false } = {}) {\r\n  try {\r\n    const diffs = [];\r\n    accumulateDeepEqualDiffs(a, b, diffs, initialPathString, { detailed });\r\n    return diffs;\r\n  } catch (error) {\r\n    if ((error.message && error.message.match(/stack|recursion/i)) || (error.number === -2146828260)) {\r\n      // warn on circular references, don't crash.\r\n      // browsers throw different errors name and messages:\r\n      // chrome/safari: \"RangeError\", \"Maximum call stack size exceeded\"\r\n      // firefox: \"InternalError\", too much recursion\"\r\n      // edge: \"Error\", \"Out of stack space\"\r\n      // eslint-disable-next-line no-console\r\n      console.warn('Warning: why-did-you-render couldn\\'t handle circular references in props.', error.name, error.message);\r\n      return false;\r\n    }\r\n    throw error;\r\n  }\r\n}\r\n","import { sortBy, groupBy } from 'lodash';\r\n\r\nimport calculateDeepEqualDiffs from './calculateDeepEqualDiffs';\r\nimport { diffTypesDescriptions } from './consts';\r\n\r\nexport default function printDiff(value1, value2, { pathString, consoleLog }) {\r\n  const diffs = calculateDeepEqualDiffs(value1, value2, pathString, { detailed: true });\r\n\r\n  const keysLength = Math.max(...diffs.map(diff => diff.pathString.length)) + 2;\r\n\r\n  Object.entries(groupBy(sortBy(diffs, 'pathString'), 'diffType'))\r\n    .forEach(([diffType, diffs]) => {\r\n      consoleLog(`%c${diffTypesDescriptions[diffType]}:`, 'text-decoration: underline; color: blue;');\r\n      diffs.forEach(diff => {\r\n        consoleLog(`${diff.pathString}:`.padEnd(keysLength, ' '), diff.prevValue);\r\n      });\r\n    });\r\n}\r\n","import wdyrStore from './wdyrStore';\r\n\r\nimport { diffTypes, diffTypesDescriptions } from './consts';\r\nimport printDiff from './printDiff';\r\n\r\nconst moreInfoUrl = 'http://bit.ly/wdyr02';\r\nconst moreInfoHooksUrl = 'http://bit.ly/wdyr3';\r\n\r\nlet inHotReload = false;\r\n\r\nfunction shouldLog(reason, Component) {\r\n  if (inHotReload) {\r\n    return false;\r\n  }\r\n\r\n  if (wdyrStore.options.logOnDifferentValues) {\r\n    return true;\r\n  }\r\n\r\n  if (Component.whyDidYouRender && Component.whyDidYouRender.logOnDifferentValues) {\r\n    return true;\r\n  }\r\n\r\n  const hasDifferentValues = ((\r\n    reason.propsDifferences &&\r\n    reason.propsDifferences.some(diff => diff.diffType === diffTypes.different)\r\n  ) || (\r\n    reason.stateDifferences &&\r\n    reason.stateDifferences.some(diff => diff.diffType === diffTypes.different)\r\n  ) || (\r\n    reason.hookDifferences &&\r\n    reason.hookDifferences.some(diff => diff.diffType === diffTypes.different)\r\n  ));\r\n\r\n  return !hasDifferentValues;\r\n}\r\n\r\nfunction logDifference({ Component, displayName, hookName, prefixMessage, diffObjType, differences, values }) {\r\n  if (differences && differences.length > 0) {\r\n    wdyrStore.options.consoleLog({ [displayName]: Component }, `${prefixMessage} of ${diffObjType} changes:`);\r\n    differences.forEach(({ pathString, diffType, prevValue, nextValue }) => {\r\n      function diffFn() {\r\n        printDiff(prevValue, nextValue, { pathString, consoleLog: wdyrStore.options.consoleLog });\r\n      }\r\n      wdyrStore.options.consoleGroup(\r\n        `%c${diffObjType === 'hook' ? `[hook ${hookName} result]` : `${diffObjType}.`}%c${pathString}%c`,\r\n        `color:${wdyrStore.options.diffNameColor};`, `color:${wdyrStore.options.diffPathColor};`, 'color:default;'\r\n      );\r\n      wdyrStore.options.consoleLog(\r\n        `${diffTypesDescriptions[diffType]}. (more info at ${hookName ? moreInfoHooksUrl : moreInfoUrl})`,\r\n      );\r\n      wdyrStore.options.consoleLog({ [`prev ${pathString}`]: prevValue }, '!==', { [`next ${pathString}`]: nextValue });\r\n      if (diffType === diffTypes.deepEquals) {\r\n        wdyrStore.options.consoleLog({ 'For detailed diff, right click the following fn, save as global, and run: ': diffFn });\r\n      }\r\n      wdyrStore.options.consoleGroupEnd();\r\n    });\r\n  }\r\n  else if (differences) {\r\n    wdyrStore.options.consoleLog(\r\n      { [displayName]: Component },\r\n      `${prefixMessage} the ${diffObjType} object itself changed but its values are all equal.`,\r\n      diffObjType === 'props' ?\r\n        'This could have been avoided by making the component pure, or by preventing its father from re-rendering.' :\r\n        'This usually means this component called setState when no changes in its state actually occurred.',\r\n      `More info at ${moreInfoUrl}`\r\n    );\r\n    wdyrStore.options.consoleLog(`prev ${diffObjType}:`, values.prev, ' !== ', values.next, `:next ${diffObjType}`);\r\n  }\r\n}\r\n\r\nexport default function defaultNotifier(updateInfo) {\r\n  const { Component, displayName, hookName, prevProps, prevState, prevHook, nextProps, nextState, nextHook, reason } = updateInfo;\r\n\r\n  if (!shouldLog(reason, Component, wdyrStore.options)) {\r\n    return;\r\n  }\r\n\r\n  wdyrStore.options.consoleGroup(`%c${displayName}`, `color: ${wdyrStore.options.titleColor};`);\r\n\r\n  let prefixMessage = 'Re-rendered because';\r\n\r\n  if (reason.propsDifferences) {\r\n    logDifference({\r\n      Component,\r\n      displayName,\r\n      prefixMessage,\r\n      diffObjType: 'props',\r\n      differences: reason.propsDifferences,\r\n      values: { prev: prevProps, next: nextProps },\r\n    });\r\n    prefixMessage = 'And because';\r\n  }\r\n\r\n  if (reason.stateDifferences) {\r\n    logDifference({\r\n      Component,\r\n      displayName,\r\n      prefixMessage,\r\n      diffObjType: 'state',\r\n      differences: reason.stateDifferences,\r\n      values: { prev: prevState, next: nextState },\r\n    });\r\n  }\r\n\r\n  if (reason.hookDifferences) {\r\n    logDifference({\r\n      Component,\r\n      displayName,\r\n      prefixMessage,\r\n      diffObjType: 'hook',\r\n      differences: reason.hookDifferences,\r\n      values: { prev: prevHook, next: nextHook },\r\n      hookName,\r\n    });\r\n  }\r\n\r\n  if (reason.propsDifferences && reason.ownerDifferences) {\r\n    const prevOwnerData = wdyrStore.ownerDataMap.get(prevProps);\r\n    const nextOwnerData = wdyrStore.ownerDataMap.get(nextProps);\r\n\r\n    wdyrStore.options.consoleGroup(`Rendered by ${nextOwnerData.displayName}`);\r\n    let prefixMessage = 'Re-rendered because';\r\n\r\n    if (reason.ownerDifferences.propsDifferences) {\r\n      logDifference({\r\n        Component: nextOwnerData.Component,\r\n        displayName: nextOwnerData.displayName,\r\n        prefixMessage,\r\n        diffObjType: 'props',\r\n        differences: reason.ownerDifferences.propsDifferences,\r\n        values: { prev: prevOwnerData.props, next: nextOwnerData.props },\r\n      });\r\n      prefixMessage = 'And because';\r\n    }\r\n\r\n    if (reason.ownerDifferences.stateDifferences) {\r\n      logDifference({\r\n        Component: nextOwnerData.Component,\r\n        displayName: nextOwnerData.displayName,\r\n        prefixMessage,\r\n        diffObjType: 'state',\r\n        differences: reason.ownerDifferences.stateDifferences,\r\n        values: { prev: prevOwnerData.state, next: nextOwnerData.state },\r\n      });\r\n    }\r\n\r\n    if (reason.ownerDifferences.hookDifferences) {\r\n      reason.ownerDifferences.hookDifferences.forEach(({ hookName, differences }, i) =>\r\n        logDifference({\r\n          Component: nextOwnerData.Component,\r\n          displayName: nextOwnerData.displayName,\r\n          prefixMessage,\r\n          diffObjType: 'hook',\r\n          differences,\r\n          values: { prev: prevOwnerData.hooks[i].result, next: nextOwnerData.hooks[i].result },\r\n          hookName,\r\n        })\r\n      );\r\n    }\r\n    wdyrStore.options.consoleGroupEnd();\r\n  }\r\n\r\n  if (!reason.propsDifferences && !reason.stateDifferences && !reason.hookDifferences) {\r\n    wdyrStore.options.consoleLog(\r\n      { [displayName]: Component },\r\n      'Re-rendered although props and state objects are the same.',\r\n      'This usually means there was a call to this.forceUpdate() inside the component.',\r\n      `more info at ${moreInfoUrl}`\r\n    );\r\n  }\r\n\r\n  wdyrStore.options.consoleGroupEnd();\r\n}\r\n\r\nexport function createDefaultNotifier(hotReloadBufferMs) {\r\n  if (hotReloadBufferMs) {\r\n    if (typeof(module) !== 'undefined' && module.hot && module.hot.addStatusHandler) {\r\n      module.hot.addStatusHandler(status => {\r\n        if (status === 'idle') {\r\n          inHotReload = true;\r\n          setTimeout(() => {\r\n            inHotReload = false;\r\n          }, hotReloadBufferMs);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  return defaultNotifier;\r\n}\r\n","/* eslint-disable no-console */\r\nimport { createDefaultNotifier } from './defaultNotifier';\r\n\r\nconst emptyFn = () => {};\r\n\r\nexport default function normalizeOptions(userOptions = {}) {\r\n  let consoleGroup = console.group;\r\n  let consoleGroupEnd = console.groupEnd;\r\n\r\n  if (userOptions.collapseGroups) {\r\n    consoleGroup = console.groupCollapsed;\r\n  }\r\n  else if (userOptions.onlyLogs) {\r\n    consoleGroup = console.log;\r\n    consoleGroupEnd = emptyFn;\r\n  }\r\n\r\n  const notifier = userOptions.notifier || (\r\n    createDefaultNotifier(\r\n      ('hotReloadBufferMs' in userOptions) ? userOptions.hotReloadBufferMs : 500\r\n    )\r\n  );\r\n\r\n  return {\r\n    include: null,\r\n    exclude: null,\r\n    notifier,\r\n    onlyLogs: false,\r\n    consoleLog: console.log,\r\n    consoleGroup,\r\n    consoleGroupEnd,\r\n    logOnDifferentValues: false,\r\n    logOwnerReasons: true,\r\n    trackHooks: true,\r\n    titleColor: '#058',\r\n    diffNameColor: 'blue',\r\n    diffPathColor: 'red',\r\n    trackExtraHooks: [],\r\n    trackAllPureComponents: false,\r\n    ...userOptions,\r\n  };\r\n}\r\n","import { isString } from 'lodash';\r\n\r\nexport default function getDisplayName(type) {\r\n  return (\r\n    type.displayName ||\r\n    type.name ||\r\n    (type.type && getDisplayName(type.type)) ||\r\n    (type.render && getDisplayName(type.render)) ||\r\n    (isString(type) ? type : 'Unknown')\r\n  );\r\n}\r\n","import { reduce } from 'lodash';\r\nimport calculateDeepEqualDiffs from './calculateDeepEqualDiffs';\r\n\r\nconst emptyObject = {};\r\n\r\nexport default function findObjectsDifferences(userPrevObj, userNextObj, { shallow = true } = {}) {\r\n  if (userPrevObj === userNextObj) {\r\n    return false;\r\n  }\r\n\r\n  if (!shallow) {\r\n    return calculateDeepEqualDiffs(userPrevObj, userNextObj);\r\n  }\r\n\r\n  const prevObj = userPrevObj || emptyObject;\r\n  const nextObj = userNextObj || emptyObject;\r\n\r\n  const keysOfBothObjects = Object.keys({ ...prevObj, ...nextObj });\r\n\r\n  return reduce(keysOfBothObjects, (result, key) => {\r\n    const deepEqualDiffs = calculateDeepEqualDiffs(prevObj[key], nextObj[key], key);\r\n    if (deepEqualDiffs) {\r\n      result = [\r\n        ...result,\r\n        ...deepEqualDiffs,\r\n      ];\r\n    }\r\n    return result;\r\n  }, []);\r\n}\r\n","import findObjectsDifferences from './findObjectsDifferences';\r\nimport wdyrStore from './wdyrStore';\r\n\r\nfunction getOwnerDifferences({ prevOwnerData, nextOwnerData }) {\r\n  if (!prevOwnerData || !nextOwnerData) {\r\n    return false;\r\n  }\r\n\r\n  // in strict mode prevOwnerData might be twice as lengthy because of double renders\r\n  const prevOwnerDataHooks = prevOwnerData.hooks.length === nextOwnerData.hooks.length * 2 ?\r\n    prevOwnerData.hooks.slice(prevOwnerData.hooks.length / 2) :\r\n    prevOwnerData.hooks;\r\n\r\n  const hookDifferences = prevOwnerDataHooks.map(({ hookName, result }, i) => ({\r\n    hookName,\r\n    differences: findObjectsDifferences(result, nextOwnerData.hooks[i].result, { shallow: false }),\r\n  }));\r\n\r\n  return {\r\n    propsDifferences: findObjectsDifferences(prevOwnerData.props, nextOwnerData.props),\r\n    stateDifferences: findObjectsDifferences(prevOwnerData.state, nextOwnerData.state),\r\n    hookDifferences: hookDifferences.length > 0 ? hookDifferences : false,\r\n  };\r\n}\r\n\r\nfunction getUpdateReason(prevProps, prevState, prevHook, nextProps, nextState, nextHook) {\r\n  const prevOwnerData = wdyrStore.ownerDataMap.get(prevProps);\r\n  const nextOwnerData = wdyrStore.ownerDataMap.get(nextProps);\r\n\r\n  return {\r\n    propsDifferences: findObjectsDifferences(prevProps, nextProps),\r\n    stateDifferences: findObjectsDifferences(prevState, nextState),\r\n    hookDifferences: findObjectsDifferences(prevHook, nextHook, { shallow: false }),\r\n    ownerDifferences: getOwnerDifferences({ prevOwnerData, nextOwnerData }),\r\n  };\r\n}\r\n\r\nexport default function getUpdateInfo({ Component, displayName, hookName, prevProps, prevState, prevHook, nextProps, nextState, nextHook }) {\r\n  return {\r\n    Component,\r\n    displayName,\r\n    hookName,\r\n    prevProps,\r\n    prevState,\r\n    prevHook,\r\n    nextProps,\r\n    nextState,\r\n    nextHook,\r\n    reason: getUpdateReason(prevProps, prevState, prevHook, nextProps, nextState, nextHook),\r\n  };\r\n}\r\n","// copied from https://github.com/facebook/react/blob/master/packages/react-reconciler/src/ReactTypeOfMode.js\r\nimport { REACT_FORWARD_REF_TYPE, REACT_MEMO_TYPE } from './consts';\r\n\r\nconst StrictMode = 0b0001;\r\n\r\n// based on \"findStrictRoot\" from https://github.com/facebook/react/blob/master/packages/react-reconciler/src/ReactStrictModeWarnings.js\r\n// notice: this is only used for class components. functional components doesn't render twice inside strict mode\r\nexport function checkIfInsideAStrictModeTree(reactComponentInstance) {\r\n  let reactInternalFiber = reactComponentInstance && (\r\n    reactComponentInstance._reactInternalFiber ||\r\n    reactComponentInstance._reactInternals\r\n  );\r\n\r\n  while (reactInternalFiber) {\r\n    if (reactInternalFiber.mode & StrictMode) {\r\n      return true;\r\n    }\r\n    reactInternalFiber = reactInternalFiber.return;\r\n  }\r\n  return false;\r\n}\r\n\r\nexport function isReactClassComponent(Component) {\r\n  return Component.prototype && !!Component.prototype.isReactComponent;\r\n}\r\n\r\nexport function isMemoComponent(Component) {\r\n  return Component.$$typeof === REACT_MEMO_TYPE;\r\n}\r\n\r\nexport function isForwardRefComponent(Component) {\r\n  return Component.$$typeof === REACT_FORWARD_REF_TYPE;\r\n}\r\n","import wdyrStore from './wdyrStore';\r\n\r\nimport { isMemoComponent } from './utils';\r\nimport getDisplayName from './getDisplayName';\r\n\r\nfunction shouldInclude(displayName) {\r\n  return (\r\n    wdyrStore.options.include &&\r\n    wdyrStore.options.include.length > 0 &&\r\n    wdyrStore.options.include.some(regex => regex.test(displayName))\r\n  );\r\n}\r\n\r\nfunction shouldExclude(displayName) {\r\n  return (\r\n    wdyrStore.options.exclude &&\r\n    wdyrStore.options.exclude.length > 0 &&\r\n    wdyrStore.options.exclude.some(regex => regex.test(displayName))\r\n  );\r\n}\r\n\r\nexport default function shouldTrack(Component, { isHookChange }) {\r\n  const displayName = getDisplayName(Component);\r\n\r\n  if (shouldExclude(displayName)) {\r\n    return false;\r\n  }\r\n\r\n  if (Component.whyDidYouRender === false) {\r\n    return false;\r\n  }\r\n\r\n  if (isHookChange && (\r\n    Component.whyDidYouRender && Component.whyDidYouRender.trackHooks === false\r\n  )) {\r\n    return false;\r\n  }\r\n\r\n  return !!(\r\n    Component.whyDidYouRender || (\r\n      wdyrStore.options.trackAllPureComponents && (\r\n        (Component && Component.prototype instanceof wdyrStore.React.PureComponent) ||\r\n        isMemoComponent(Component)\r\n      )\r\n    ) ||\r\n    shouldInclude(displayName)\r\n  );\r\n}\r\n","import { defaults } from 'lodash';\r\n\r\nimport wdyrStore from '../wdyrStore';\r\n\r\nimport { checkIfInsideAStrictModeTree } from '../utils';\r\nimport getUpdateInfo from '../getUpdateInfo';\r\n\r\nexport default function patchClassComponent(ClassComponent, { displayName }) {\r\n  class WDYRPatchedClassComponent extends ClassComponent {\r\n    constructor(props, context) {\r\n      super(props, context);\r\n\r\n      this._WDYR = {\r\n        renderNumber: 0,\r\n      };\r\n\r\n      const origRender = super.render || this.render;\r\n\r\n      // this probably means that render is an arrow function or this.render.bind(this) was called on the original class\r\n      const renderIsABindedFunction = origRender !== ClassComponent.prototype.render;\r\n      if (renderIsABindedFunction) {\r\n        this.render = () => {\r\n          WDYRPatchedClassComponent.prototype.render.apply(this);\r\n          return origRender();\r\n        };\r\n      }\r\n    }\r\n    render() {\r\n      this._WDYR.renderNumber++;\r\n\r\n      if (!('isStrictMode' in this._WDYR)) {\r\n        this._WDYR.isStrictMode = checkIfInsideAStrictModeTree(this);\r\n      }\r\n\r\n      // in strict mode- ignore every other render\r\n      if (!(this._WDYR.isStrictMode && this._WDYR.renderNumber % 2 === 1)) {\r\n        if (this._WDYR.prevProps) {\r\n          const updateInfo = getUpdateInfo({\r\n            Component: ClassComponent,\r\n            displayName,\r\n            prevProps: this._WDYR.prevProps,\r\n            prevState: this._WDYR.prevState,\r\n            nextProps: this.props,\r\n            nextState: this.state,\r\n          });\r\n\r\n          wdyrStore.options.notifier(updateInfo);\r\n        }\r\n\r\n        this._WDYR.prevProps = this.props;\r\n        this._WDYR.prevState = this.state;\r\n      }\r\n\r\n      return super.render ? super.render() : null;\r\n    }\r\n  }\r\n\r\n  try {\r\n    WDYRPatchedClassComponent.displayName = displayName;\r\n  } catch (e) {\r\n    // not crucial if displayName couldn't be set\r\n  }\r\n\r\n  defaults(WDYRPatchedClassComponent, ClassComponent);\r\n\r\n  return WDYRPatchedClassComponent;\r\n}\r\n","import { defaults } from 'lodash';\r\n\r\nimport wdyrStore from '../wdyrStore';\r\n\r\nimport getUpdateInfo from '../getUpdateInfo';\r\n\r\nconst getFunctionalComponentFromStringComponent = (componentTypeStr) => props => (\r\n  wdyrStore.React.createElement(componentTypeStr, props)\r\n);\r\n\r\nexport default function patchFunctionalOrStrComponent(FunctionalOrStringComponent, { isPure, displayName }) {\r\n  const FunctionalComponent = typeof(FunctionalOrStringComponent) === 'string' ?\r\n    getFunctionalComponentFromStringComponent(FunctionalOrStringComponent) :\r\n    FunctionalOrStringComponent;\r\n\r\n  function WDYRFunctionalComponent() {\r\n    const nextProps = arguments[0];\r\n    const ref = wdyrStore.React.useRef();\r\n\r\n    const prevProps = ref.current;\r\n    ref.current = nextProps;\r\n\r\n    if (prevProps) {\r\n      const updateInfo = getUpdateInfo({\r\n        Component: FunctionalComponent,\r\n        displayName,\r\n        prevProps,\r\n        nextProps,\r\n      });\r\n\r\n      const notifiedByHooks = (\r\n        !updateInfo.reason.propsDifferences || (\r\n          (isPure && updateInfo.reason.propsDifferences.length === 0)\r\n        )\r\n      );\r\n\r\n      if (!notifiedByHooks) {\r\n        wdyrStore.options.notifier(updateInfo);\r\n      }\r\n    }\r\n\r\n    return FunctionalComponent(...arguments);\r\n  }\r\n\r\n  try {\r\n    WDYRFunctionalComponent.displayName = displayName;\r\n  } catch (e) {\r\n    // not crucial if displayName couldn't be set\r\n  }\r\n\r\n  WDYRFunctionalComponent.ComponentForHooksTracking = FunctionalComponent;\r\n  defaults(WDYRFunctionalComponent, FunctionalComponent);\r\n\r\n  return WDYRFunctionalComponent;\r\n}\r\n","import { defaults } from 'lodash';\r\n\r\nimport wdyrStore from '../wdyrStore';\r\n\r\nimport getDisplayName from '../getDisplayName';\r\nimport { isForwardRefComponent, isMemoComponent, isReactClassComponent } from '../utils';\r\nimport patchClassComponent from './patchClassComponent';\r\nimport patchFunctionalOrStrComponent from './patchFunctionalOrStrComponent';\r\n\r\nexport default function patchMemoComponent(MemoComponent, { displayName }) {\r\n  const { type: InnerMemoComponent } = MemoComponent;\r\n\r\n  const isInnerMemoComponentAClassComponent = isReactClassComponent(InnerMemoComponent);\r\n  const isInnerMemoComponentForwardRefs = isForwardRefComponent(InnerMemoComponent);\r\n  const isInnerMemoComponentAnotherMemoComponent = isMemoComponent(InnerMemoComponent);\r\n\r\n  const WrappedFunctionalComponent = isInnerMemoComponentForwardRefs ?\r\n    InnerMemoComponent.render :\r\n    InnerMemoComponent;\r\n\r\n  const PatchedInnerComponent = isInnerMemoComponentAClassComponent ?\r\n    patchClassComponent(WrappedFunctionalComponent, { displayName }) :\r\n    (isInnerMemoComponentAnotherMemoComponent ?\r\n      patchMemoComponent(WrappedFunctionalComponent, { displayName }) :\r\n      patchFunctionalOrStrComponent(WrappedFunctionalComponent, { displayName, isPure: true })\r\n    );\r\n\r\n  try {\r\n    PatchedInnerComponent.displayName = getDisplayName(WrappedFunctionalComponent);\r\n  } catch (e) {\r\n    // not crucial if displayName couldn't be set\r\n  }\r\n\r\n  PatchedInnerComponent.ComponentForHooksTracking = MemoComponent;\r\n  defaults(PatchedInnerComponent, WrappedFunctionalComponent);\r\n\r\n  const WDYRMemoizedFunctionalComponent = wdyrStore.React.memo(\r\n    isInnerMemoComponentForwardRefs ? wdyrStore.React.forwardRef(PatchedInnerComponent) : PatchedInnerComponent,\r\n    MemoComponent.compare\r\n  );\r\n\r\n  try {\r\n    WDYRMemoizedFunctionalComponent.displayName = displayName;\r\n  } catch (e) {\r\n    // not crucial if displayName couldn't be set\r\n  }\r\n\r\n  defaults(WDYRMemoizedFunctionalComponent, MemoComponent);\r\n\r\n  return WDYRMemoizedFunctionalComponent;\r\n}\r\n","import { defaults } from 'lodash';\r\n\r\nimport wdyrStore from '../wdyrStore';\r\n\r\nimport getDisplayName from '../getDisplayName';\r\nimport { isMemoComponent } from '../utils';\r\nimport patchFunctionalOrStrComponent from './patchFunctionalOrStrComponent';\r\n\r\nexport default function patchForwardRefComponent(ForwardRefComponent, { displayName }) {\r\n  const { render: InnerForwardRefComponent } = ForwardRefComponent;\r\n\r\n  const isInnerComponentMemoized = isMemoComponent(InnerForwardRefComponent);\r\n  const WrappedFunctionalComponent = isInnerComponentMemoized ?\r\n    InnerForwardRefComponent.type : InnerForwardRefComponent;\r\n\r\n  const WDYRWrappedByReactForwardRefFunctionalComponent = (\r\n    patchFunctionalOrStrComponent(WrappedFunctionalComponent, { isPure: isInnerComponentMemoized, displayName })\r\n  );\r\n\r\n  WDYRWrappedByReactForwardRefFunctionalComponent.displayName = getDisplayName(WrappedFunctionalComponent);\r\n  WDYRWrappedByReactForwardRefFunctionalComponent.ComponentForHooksTracking = WrappedFunctionalComponent;\r\n  defaults(WDYRWrappedByReactForwardRefFunctionalComponent, WrappedFunctionalComponent);\r\n\r\n  const WDYRForwardRefFunctionalComponent = wdyrStore.React.forwardRef(\r\n    isInnerComponentMemoized ?\r\n      wdyrStore.React.memo(WDYRWrappedByReactForwardRefFunctionalComponent, InnerForwardRefComponent.compare) :\r\n      WDYRWrappedByReactForwardRefFunctionalComponent\r\n  );\r\n\r\n  try {\r\n    WDYRForwardRefFunctionalComponent.displayName = displayName;\r\n  } catch (e) {\r\n    // not crucial if displayName couldn't be set\r\n  }\r\n\r\n  defaults(WDYRForwardRefFunctionalComponent, ForwardRefComponent);\r\n\r\n  return WDYRForwardRefFunctionalComponent;\r\n}\r\n","import { get, isFunction } from 'lodash';\r\n\r\nimport wdyrStore from './wdyrStore';\r\n\r\nimport normalizeOptions from './normalizeOptions';\r\nimport getDisplayName from './getDisplayName';\r\nimport getUpdateInfo from './getUpdateInfo';\r\nimport shouldTrack from './shouldTrack';\r\n\r\nimport patchClassComponent from './patches/patchClassComponent';\r\nimport patchFunctionalOrStrComponent from './patches/patchFunctionalOrStrComponent';\r\nimport patchMemoComponent from './patches/patchMemoComponent';\r\nimport patchForwardRefComponent from './patches/patchForwardRefComponent';\r\n\r\nimport { isForwardRefComponent, isMemoComponent, isReactClassComponent } from './utils';\r\nimport { dependenciesMap } from './calculateDeepEqualDiffs';\r\n\r\nexport { wdyrStore };\r\n\r\nconst initialHookValue = Symbol('initial-hook-value');\r\n\r\nfunction trackHookChanges(hookName, { path: hookPath }, hookResult) {\r\n  const nextHook = hookPath ? get(hookResult, hookPath) : hookResult;\r\n\r\n  const renderNumberForTheHook = wdyrStore.React.useRef(true);\r\n\r\n  // TODO: improve\r\n  const isSecondCycleOfRenders = (\r\n    wdyrStore.hooksPerRender[0] &&\r\n    wdyrStore.hooksPerRender[0].renderNumberForTheHook !== renderNumberForTheHook.current\r\n  );\r\n\r\n  if (isSecondCycleOfRenders) {\r\n    wdyrStore.hooksPerRender = [];\r\n  }\r\n\r\n  wdyrStore.hooksPerRender.push({ hookName, result: nextHook, renderNumberForTheHook: renderNumberForTheHook.current });\r\n\r\n  renderNumberForTheHook.current++;\r\n\r\n  const ComponentHookDispatchedFromInstance = (\r\n    wdyrStore.React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED &&\r\n    wdyrStore.React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner.current\r\n  );\r\n\r\n  const prevHookRef = wdyrStore.React.useRef(initialHookValue);\r\n\r\n  if (!ComponentHookDispatchedFromInstance) {\r\n    return hookResult;\r\n  }\r\n\r\n  const Component = ComponentHookDispatchedFromInstance.type.ComponentForHooksTracking || ComponentHookDispatchedFromInstance.type;\r\n  const displayName = getDisplayName(Component);\r\n\r\n  const isShouldTrack = shouldTrack(Component, { isHookChange: true });\r\n  if (!isShouldTrack) {\r\n    return hookResult;\r\n  }\r\n\r\n  const newPrevHookRef = prevHookRef.current;\r\n  prevHookRef.current = hookResult;\r\n\r\n  if (newPrevHookRef !== initialHookValue) {\r\n    const notification = getUpdateInfo({\r\n      Component: Component,\r\n      displayName,\r\n      hookName,\r\n      prevHook: hookPath ? get(newPrevHookRef, hookPath) : newPrevHookRef,\r\n      nextHook,\r\n    });\r\n\r\n    if (notification.reason.hookDifferences) {\r\n      wdyrStore.options.notifier(notification);\r\n    }\r\n  }\r\n\r\n  return hookResult;\r\n}\r\n\r\nfunction createPatchedComponent(Component, { displayName }) {\r\n  if (isMemoComponent(Component)) {\r\n    return patchMemoComponent(Component, { displayName });\r\n  }\r\n\r\n  if (isForwardRefComponent(Component)) {\r\n    return patchForwardRefComponent(Component, { displayName });\r\n  }\r\n\r\n  if (isReactClassComponent(Component)) {\r\n    return patchClassComponent(Component, { displayName });\r\n  }\r\n\r\n  return patchFunctionalOrStrComponent(Component, { displayName, isPure: false });\r\n}\r\n\r\nfunction getPatchedComponent(Component, { displayName }) {\r\n  if (wdyrStore.componentsMap.has(Component)) {\r\n    return wdyrStore.componentsMap.get(Component);\r\n  }\r\n\r\n  const WDYRPatchedComponent = createPatchedComponent(Component, { displayName });\r\n\r\n  wdyrStore.componentsMap.set(Component, WDYRPatchedComponent);\r\n\r\n  return WDYRPatchedComponent;\r\n}\r\n\r\nfunction getIsSupportedComponentType(Comp) {\r\n  if (!Comp) {\r\n    return false;\r\n  }\r\n\r\n  if (isMemoComponent(Comp)) {\r\n    return getIsSupportedComponentType(Comp.type);\r\n  }\r\n\r\n  if (isForwardRefComponent(Comp)) {\r\n    return getIsSupportedComponentType(Comp.render);\r\n  }\r\n\r\n  if (typeof Comp === 'function') {\r\n    return true;\r\n  }\r\n}\r\n\r\nexport const hooksConfig = {\r\n  useState: { path: '0' },\r\n  useReducer: { path: '0' },\r\n  useContext: undefined,\r\n  useMemo: { dependenciesPath: '1', dontReport: true },\r\n  useCallback: { dependenciesPath: '1', dontReport: true },\r\n};\r\n\r\nexport function storeOwnerData(element) {\r\n  const OwnerInstance = wdyrStore.React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner.current;\r\n  if (OwnerInstance) {\r\n    const Component = OwnerInstance.type.ComponentForHooksTracking || OwnerInstance.type;\r\n    const displayName = getDisplayName(Component);\r\n    wdyrStore.ownerDataMap.set(element.props, {\r\n      Component,\r\n      displayName,\r\n      props: OwnerInstance.pendingProps,\r\n      state: OwnerInstance.stateNode ? OwnerInstance.stateNode.state : null,\r\n      hooks: wdyrStore.hooksPerRender,\r\n    });\r\n  }\r\n}\r\n\r\nfunction resetHooksPerRenderIfNeeded() {\r\n  // Intercept assignments to ReactCurrentOwner.current to reset hooksPerRender\r\n  let currentOwner = null;\r\n  if (wdyrStore.React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED) {\r\n    Object.defineProperty(wdyrStore.React.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner, 'current', {\r\n      get() {\r\n        return currentOwner;\r\n      },\r\n      set(value) {\r\n        currentOwner = value;\r\n        wdyrStore.hooksPerRender = [];\r\n      },\r\n    });\r\n  }\r\n}\r\n\r\nfunction trackHooksIfNeeded() {\r\n  const hooksSupported = !!wdyrStore.React.useState;\r\n\r\n  if (wdyrStore.options.trackHooks && hooksSupported) {\r\n    const nativeHooks = Object.entries(hooksConfig).map(([hookName, hookTrackingConfig]) => {\r\n      return [wdyrStore.React, hookName, hookTrackingConfig];\r\n    });\r\n\r\n    const hooksToTrack = [\r\n      ...nativeHooks,\r\n      ...wdyrStore.options.trackExtraHooks,\r\n    ];\r\n\r\n    hooksToTrack.forEach(([hookParent, hookName, hookTrackingConfig = {}]) => {\r\n      const originalHook = hookParent[hookName];\r\n      const newHookName = hookName[0].toUpperCase() + hookName.slice(1);\r\n\r\n      const newHook = function(...args) {\r\n        const hookResult = originalHook.call(this, ...args);\r\n        const { dependenciesPath, dontReport } = hookTrackingConfig;\r\n        if (dependenciesPath && isFunction(hookResult)) {\r\n          dependenciesMap.set(hookResult, { hookName, deps: get(args, dependenciesPath) });\r\n        }\r\n        if (!dontReport) {\r\n          trackHookChanges(hookName, hookTrackingConfig, hookResult);\r\n        }\r\n        return hookResult;\r\n      };\r\n\r\n      Object.defineProperty(newHook, 'name', { value: newHookName, writable: false });\r\n      Object.assign(newHook, { originalHook });\r\n      hookParent[hookName] = newHook;\r\n    });\r\n  }\r\n}\r\n\r\nexport function getWDYRType(origType) {\r\n  const isShouldTrack = (\r\n    getIsSupportedComponentType(origType) &&\r\n    shouldTrack(origType, { isHookChange: false })\r\n  );\r\n\r\n  if (!isShouldTrack) {\r\n    return null;\r\n  }\r\n\r\n  const displayName = (\r\n    origType &&\r\n    origType.whyDidYouRender &&\r\n    origType.whyDidYouRender.customName ||\r\n    getDisplayName(origType)\r\n  );\r\n\r\n  const WDYRPatchedComponent = getPatchedComponent(origType, { displayName });\r\n\r\n  return WDYRPatchedComponent;\r\n}\r\n\r\nexport default function whyDidYouRender(React, userOptions) {\r\n  if (React.isWDYR) {\r\n    return;\r\n  }\r\n\r\n  Object.assign(wdyrStore, {\r\n    React,\r\n    options: normalizeOptions(userOptions),\r\n    origCreateElement: React.createElement,\r\n    origCreateFactory: React.createFactory,\r\n    origCloneElement: React.cloneElement,\r\n    componentsMap: new WeakMap(),\r\n  });\r\n\r\n  resetHooksPerRenderIfNeeded();\r\n\r\n  React.createElement = function(origType, ...rest) {\r\n    const WDYRType = getWDYRType(origType);\r\n    if (WDYRType) {\r\n      try {\r\n        const element = wdyrStore.origCreateElement.apply(React, [WDYRType, ...rest]);\r\n        if (wdyrStore.options.logOwnerReasons) {\r\n          storeOwnerData(element);\r\n        }\r\n        return element;\r\n      }\r\n      catch (e) {\r\n        wdyrStore.options.consoleLog('whyDidYouRender error. Please file a bug at https://github.com/welldone-software/why-did-you-render/issues.', {\r\n          errorInfo: {\r\n            error: e,\r\n            componentNameOrComponent: origType,\r\n            rest,\r\n            options: wdyrStore.options,\r\n          },\r\n        });\r\n      }\r\n    }\r\n\r\n    return wdyrStore.origCreateElement.apply(React, [origType, ...rest]);\r\n  };\r\n  Object.assign(React.createElement, wdyrStore.origCreateElement);\r\n\r\n  React.createFactory = type => {\r\n    const factory = React.createElement.bind(null, type);\r\n    factory.type = type;\r\n    return factory;\r\n  };\r\n  Object.assign(React.createFactory, wdyrStore.origCreateFactory);\r\n\r\n  React.cloneElement = (...args) => {\r\n    const element = wdyrStore.origCloneElement.apply(React, args);\r\n    if (wdyrStore.options.logOwnerReasons) {\r\n      storeOwnerData(element);\r\n    }\r\n\r\n    return element;\r\n  };\r\n  Object.assign(React.cloneElement, wdyrStore.origCloneElement);\r\n\r\n  trackHooksIfNeeded();\r\n\r\n  React.isWDYR = true;\r\n\r\n  React.__REVERT_WHY_DID_YOU_RENDER__ = () => {\r\n    Object.assign(React, {\r\n      createElement: wdyrStore.origCreateElement,\r\n      createFactory: wdyrStore.origCreateFactory,\r\n      cloneElement: wdyrStore.origCloneElement,\r\n    });\r\n\r\n    wdyrStore.componentsMap = null;\r\n\r\n    const hooksToRevert = [\r\n      ...Object.keys(hooksConfig).map(hookName => [React, hookName]),\r\n      ...wdyrStore.options.trackExtraHooks,\r\n    ];\r\n    hooksToRevert.forEach(([hookParent, hookName]) => {\r\n      if (hookParent[hookName].originalHook) {\r\n        hookParent[hookName] = hookParent[hookName].originalHook;\r\n      }\r\n    });\r\n\r\n    delete React.__REVERT_WHY_DID_YOU_RENDER__;\r\n    delete React.isWDYR;\r\n  };\r\n\r\n  return React;\r\n}\r\n","import * as React from 'react';\r\n\r\nimport wdyrStore from './wdyrStore';\r\n\r\nimport whyDidYouRender, { storeOwnerData, getWDYRType } from './whyDidYouRender';\r\nimport defaultNotifier from './defaultNotifier';\r\n\r\nwhyDidYouRender.defaultNotifier = defaultNotifier;\r\nwhyDidYouRender.wdyrStore = wdyrStore;\r\nwhyDidYouRender.storeOwnerData = storeOwnerData;\r\nwhyDidYouRender.getWDYRType = getWDYRType;\r\nObject.assign(whyDidYouRender, React);\r\n\r\nexport default whyDidYouRender;\r\n"],"names":["wdyrStore","React","undefined","options","origCreateElement","origCreateFactory","origCloneElement","componentsMap","WeakMap","ownerDataMap","hooksPerRender","diffTypes","diffTypesDescriptions","different","deepEquals","date","regex","reactElement","same","hasSymbol","Symbol","REACT_MEMO_TYPE","REACT_FORWARD_REF_TYPE","hasElementType","Element","REACT_ELEMENT_TYPE","isReactElement","object","$$typeof","trackDiff","a","b","diffsAccumulator","pathString","diffType","push","prevValue","nextValue","isGetter","obj","prop","Object","getOwnPropertyDescriptor","dependenciesMap","accumulateDeepEqualDiffs","detailed","isArray","arrayLength","length","arrayItemDiffs","numberOfDeepEqualsItems","i","diffEquals","isSet","size","Set","valA","has","isDate","getTime","Date","isRegExp","toString","type","reactElementPropsAreDeepEqual","props","isFunction","name","aDependenciesObj","get","bDependenciesObj","dependenciesAreDeepEqual","deps","hookName","getPrototypeOf","aKeys","getOwnPropertyNames","bKeys","allKeys","uniq","clonedA","isPlainObject","clonedB","relevantKeys","filter","key","isError","keysLength","objectValuesDiffs","numberOfDeepEqualsObjectValues","calculateDeepEqualDiffs","initialPathString","diffs","error","message","match","number","console","warn","printDiff","value1","value2","consoleLog","Math","max","map","diff","entries","groupBy","sortBy","forEach","padEnd","moreInfoUrl","moreInfoHooksUrl","inHotReload","shouldLog","reason","Component","logOnDifferentValues","whyDidYouRender","hasDifferentValues","propsDifferences","some","stateDifferences","hookDifferences","logDifference","displayName","prefixMessage","diffObjType","differences","values","diffFn","consoleGroup","diffNameColor","diffPathColor","consoleGroupEnd","prev","next","defaultNotifier","updateInfo","prevProps","prevState","prevHook","nextProps","nextState","nextHook","titleColor","ownerDifferences","prevOwnerData","nextOwnerData","state","hooks","result","createDefaultNotifier","hotReloadBufferMs","module","hot","addStatusHandler","status","setTimeout","emptyFn","normalizeOptions","userOptions","group","groupEnd","collapseGroups","groupCollapsed","onlyLogs","log","notifier","include","exclude","logOwnerReasons","trackHooks","trackExtraHooks","trackAllPureComponents","getDisplayName","render","isString","emptyObject","findObjectsDifferences","userPrevObj","userNextObj","shallow","prevObj","nextObj","keysOfBothObjects","keys","reduce","deepEqualDiffs","getOwnerDifferences","prevOwnerDataHooks","slice","getUpdateReason","getUpdateInfo","StrictMode","checkIfInsideAStrictModeTree","reactComponentInstance","reactInternalFiber","_reactInternalFiber","_reactInternals","mode","isReactClassComponent","prototype","isReactComponent","isMemoComponent","isForwardRefComponent","shouldInclude","test","shouldExclude","shouldTrack","isHookChange","PureComponent","patchClassComponent","ClassComponent","WDYRPatchedClassComponent","context","_WDYR","renderNumber","origRender","renderIsABindedFunction","apply","isStrictMode","e","defaults","getFunctionalComponentFromStringComponent","componentTypeStr","createElement","patchFunctionalOrStrComponent","FunctionalOrStringComponent","isPure","FunctionalComponent","WDYRFunctionalComponent","arguments","ref","useRef","current","notifiedByHooks","ComponentForHooksTracking","patchMemoComponent","MemoComponent","InnerMemoComponent","isInnerMemoComponentAClassComponent","isInnerMemoComponentForwardRefs","isInnerMemoComponentAnotherMemoComponent","WrappedFunctionalComponent","PatchedInnerComponent","WDYRMemoizedFunctionalComponent","memo","forwardRef","compare","patchForwardRefComponent","ForwardRefComponent","InnerForwardRefComponent","isInnerComponentMemoized","WDYRWrappedByReactForwardRefFunctionalComponent","WDYRForwardRefFunctionalComponent","initialHookValue","trackHookChanges","hookResult","hookPath","path","renderNumberForTheHook","isSecondCycleOfRenders","ComponentHookDispatchedFromInstance","__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED","ReactCurrentOwner","prevHookRef","isShouldTrack","newPrevHookRef","notification","createPatchedComponent","getPatchedComponent","WDYRPatchedComponent","set","getIsSupportedComponentType","Comp","hooksConfig","useState","useReducer","useContext","useMemo","dependenciesPath","dontReport","useCallback","storeOwnerData","element","OwnerInstance","pendingProps","stateNode","resetHooksPerRenderIfNeeded","currentOwner","defineProperty","value","trackHooksIfNeeded","hooksSupported","nativeHooks","hookTrackingConfig","hooksToTrack","hookParent","originalHook","newHookName","toUpperCase","newHook","args","call","writable","assign","getWDYRType","origType","customName","isWDYR","createFactory","cloneElement","WDYRType","rest","errorInfo","componentNameOrComponent","factory","bind","__REVERT_WHY_DID_YOU_RENDER__","hooksToRevert"],"mappings":"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"}