{"map":"{\"version\":3,\"sources\":[],\"names\":[],\"mappings\":\"\"}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{67:function(e,t){throw new Error('Module parse failed: Unexpected token (1:3172)\\nYou may need an appropriate loader to handle this file type.\\n> import _objectSpread from\"/Users/anshluthra/Downloads/covidrepo-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";import _slicedToArray from\"/Users/anshluthra/Downloads/covidrepo-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{API_ROOT_URL,STATE_NAMES}from\\'../constants\\';import useIsVisible from\\'../hooks/useIsVisible\\';import{fetcher,formatNumber,getStatistic}from\\'../utils/commonFunctions\\';import React from\\'react\\';import classnames from\\'classnames\\';import{memo,useMemo,useState,useEffect,lazy,Suspense,useRef}from\\'react\\';import{Smile}from\\'react-feather\\';import{Helmet}from\\'react-helmet\\';import{useTranslation}from\\'react-i18next\\';import{useParams}from\\'react-router-dom\\';import{useSessionStorage}from\\'react-use\\';import useSWR from\\'swr\\';var DeltaBarGraph=lazy(function(){return import(\\'./DeltaBarGraph\\');});var Footer=lazy(function(){return import(\\'./Footer\\');});var Level=lazy(function(){return import(\\'./Level\\');});var LevelVaccinated=lazy(function(){return import(\\'./LevelVaccinated\\');});var MapExplorer=lazy(function(){return import(\\'./MapExplorer\\');});var MapSwitcher=lazy(function(){return import(\\'./MapSwitcher\\');});var Minigraphs=lazy(function(){return import(\\'./Minigraphs\\');});var StateHeader=lazy(function(){return import(\\'./StateHeader\\');});var StateMeta=lazy(function(){return import(\\'./StateMeta\\');});var TimeseriesExplorer=lazy(function(){return import(\\'./TimeseriesExplorer\\');});function State(){var _useTranslation=useTranslation(),t=_useTranslation.t;var stateCode=useParams().stateCode.toUpperCase();var _useSessionStorage=useSessionStorage(\\'mapStatistic\\',\\'active\\'),_useSessionStorage2=_slicedToArray(_useSessionStorage,2),mapStatistic=_useSessionStorage2[0],setMapStatistic=_useSessionStorage2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showAllDistricts=_useState2[0],setShowAllDistricts=_useState2[1];var _useState3=useState({stateCode:stateCode,districtName:null}),_useState4=_slicedToArray(_useState3,2),regionHighlighted=_useState4[0],setRegionHighlighted=_useState4[1];useEffect(function(){if(regionHighlighted.stateCode!==stateCode){setRegionHighlighted({stateCode:stateCode,districtName:null});setShowAllDistricts(false);}},[regionHighlighted.stateCode,stateCode]);var _useSWR=useSWR(\"\".concat(API_ROOT_URL,\"/timeseries-\").concat(stateCode,\".min.json\"),fetcher,{revalidateOnMount:true,refreshInterval:100000}),timeseries=_useSWR.data,timeseriesResponseError=_useSWR.error;var _useSWR2=useSWR(\"\".concat(API_ROOT_URL,\"/data.min.json\"),fetcher,{revalidateOnMount:true,refreshInterval:100000}),data=_useSWR2.data;var toggleShowAllDistricts=function toggleShowAllDistricts(){setShowAllDistricts(!showAllDistricts);};var handleSort=function handleSort(districtNameA,districtNameB){var districtA=data[stateCode].districts[districtNameA];var districtB=data[stateCode].districts[districtNameB];return getStatistic(districtB,\\'total\\',mapStatistic)-getStatistic(districtA,\\'total\\',mapStatistic);};var gridRowCount=useMemo(function(){if(!data)return;var gridColumnCount=window.innerWidth>=540?3:2;var districtCount=data[stateCode]?.districts?Object.keys(data[stateCode].districts).filter(function(districtName){return districtName!==\\'Unknown\\';}).length:0;var gridRowCount=Math.ceil(districtCount/gridColumnCount);return gridRowCount;},[data,stateCode]);var stateMetaElement=useRef();var isStateMetaVisible=useIsVisible(stateMetaElement);var trail=useMemo(function(){var styles=[];[0,0,0,0].map(function(element,index){styles.push({animationDelay:\"\".concat(index*250,\"ms\")});return null;});return styles;},[]);var lookback=showAllDistricts?window.innerWidth>=540?10:8:6;return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Helmet,null,/*#__PURE__*/React.createElement(\"title\",null,\"Coronavirus Outbreak in \",STATE_NAMES[stateCode],\" - covid19india.org\"),/*#__PURE__*/React.createElement(\"meta\",{name:\"title\",content:\"Coronavirus Outbreak in \".concat(STATE_NAMES[stateCode],\": Latest Map and Case Count\")})),/*#__PURE__*/React.createElement(\"div\",{className:\"State\"},/*#__PURE__*/React.createElement(\"div\",{className:\"state-left\"},/*#__PURE__*/React.createElement(StateHeader,{data:data?.[stateCode],stateCode:stateCode}),/*#__PURE__*/React.createElement(\"div\",{style:{position:\\'relative\\'}},/*#__PURE__*/React.createElement(MapSwitcher,{mapStatistic:mapStatistic,setMapStatistic:setMapStatistic}),/*#__PURE__*/React.createElement(Level,{data:data?.[stateCode]}),/*#__PURE__*/React.createElement(Minigraphs,{timeseries:timeseries?.[stateCode]?.dates,stateCode:stateCode,forceRender:!!timeseriesResponseError})),data?.[stateCode]?.total?.vaccinated&&/*#__PURE__*/React.createElement(LevelVaccinated,{data:data?.[stateCode]}),data&&/*#__PURE__*/React.createElement(Suspense,{fallback:/*#__PURE__*/React.createElement(\"div\",{style:{minHeight:\\'50rem\\'}})},/*#__PURE__*/React.createElement(MapExplorer,{stateCode:stateCode,data:data,regionHighlighted:regionHighlighted,setRegionHighlighted:setRegionHighlighted,mapStatistic:mapStatistic,setMapStatistic:setMapStatistic})),/*#__PURE__*/React.createElement(\"span\",{ref:stateMetaElement}),isStateMetaVisible&&data&&/*#__PURE__*/React.createElement(Suspense,{fallback:/*#__PURE__*/React.createElement(\"div\",null)},/*#__PURE__*/React.createElement(StateMeta,{stateCode:stateCode,data:data,timeseries:timeseries?.[stateCode]?.dates}))),/*#__PURE__*/React.createElement(\"div\",{className:\"state-right\"},/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"div\",{className:\"district-bar\",style:!showAllDistricts?{display:\\'flex\\'}:{}},/*#__PURE__*/React.createElement(\"div\",{className:\"district-bar-top\"},/*#__PURE__*/React.createElement(\"div\",{className:\"district-bar-left\"},/*#__PURE__*/React.createElement(\"h2\",{className:classnames(mapStatistic,\\'fadeInUp\\'),style:trail[0]},\"Top districts\"),/*#__PURE__*/React.createElement(\"div\",{className:\"districts fadeInUp \".concat(showAllDistricts?\\'is-grid\\':\\'\\'),style:showAllDistricts?_objectSpread({gridTemplateRows:\"repeat(\".concat(gridRowCount,\", 2rem)\")},trail[1]):trail[1]},Object.keys(data?.[stateCode]?.districts||{}).filter(function(districtName){return districtName!==\\'Unknown\\';}).sort(function(a,b){return handleSort(a,b);}).slice(0,showAllDistricts?undefined:5).map(function(districtName){var total=getStatistic(data[stateCode].districts[districtName],\\'total\\',mapStatistic);var delta=getStatistic(data[stateCode].districts[districtName],\\'delta\\',mapStatistic);return/*#__PURE__*/React.createElement(\"div\",{key:districtName,className:\"district\"},/*#__PURE__*/React.createElement(\"h2\",null,formatNumber(total)),/*#__PURE__*/React.createElement(\"h5\",null,t(districtName)),mapStatistic!==\\'active\\'&&/*#__PURE__*/React.createElement(\"div\",{className:\"delta\"},/*#__PURE__*/React.createElement(\"h6\",{className:mapStatistic},delta>0?\"\\\\u2191\"+formatNumber(delta):\\'\\')));}))),/*#__PURE__*/React.createElement(\"div\",{className:\"district-bar-right fadeInUp\",style:trail[2]},timeseries&&(mapStatistic===\\'confirmed\\'||mapStatistic===\\'deceased\\')&&/*#__PURE__*/React.createElement(\"div\",{className:\"happy-sign\"},Object.keys(timeseries[stateCode]?.dates||{}).slice(-lookback).every(function(date){return getStatistic(timeseries[stateCode].dates[date],\\'delta\\',mapStatistic)===0;})&&/*#__PURE__*/React.createElement(\"div\",{className:\"alert \".concat(mapStatistic===\\'confirmed\\'?\\'is-green\\':\\'\\')},/*#__PURE__*/React.createElement(Smile,null),/*#__PURE__*/React.createElement(\"div\",{className:\"alert-right\"},\"No new \",mapStatistic,\" cases in the past five days\"))),/*#__PURE__*/React.createElement(DeltaBarGraph,{timeseries:timeseries?.[stateCode]?.dates,statistic:mapStatistic,stateCode:stateCode,lookback:lookback,forceRender:!!timeseriesResponseError}))),/*#__PURE__*/React.createElement(\"div\",{className:\"district-bar-bottom\"},Object.keys(data?.[stateCode]?.districts||{}).length>5?/*#__PURE__*/React.createElement(\"button\",{className:\"button fadeInUp\",onClick:toggleShowAllDistricts,style:trail[3]},/*#__PURE__*/React.createElement(\"span\",null,showAllDistricts?\"View less\":\"View all\")):/*#__PURE__*/React.createElement(\"div\",{style:{height:\\'3.75rem\\',flexBasis:\\'15%\\'}}))),/*#__PURE__*/React.createElement(Suspense,{fallback:/*#__PURE__*/React.createElement(\"div\",null)},/*#__PURE__*/React.createElement(TimeseriesExplorer,{stateCode:stateCode,timeseries:timeseries,regionHighlighted:regionHighlighted,setRegionHighlighted:setRegionHighlighted,forceRender:!!timeseriesResponseError}))))),/*#__PURE__*/React.createElement(Footer,null));}export default memo(State);')}}]);","extractedComments":[]}